---
title: "OSI 7계층 중 2계층에 대해서 알아보자"
date: 2022-07-20
---

> 프론트앤드 스터디에서 진행한 OSI 7계층 중 2계층에 대한 발표자료

# 2계층 (데이터링크 계층, DataLink Layer)

- 네트워크 장비간의 신호를 주고받는 **규칙**을 정하는 계층
- 데이터를 전송할 때 발생하는 충돌을 막기 위해서 데이터를 송수신하는 순서나 규칙이 필요하게 되었다.
- 신호가 닿는 범위(세그먼트)에서의 데이터 전송에 관해서는 2계층에서 처리한다.

1계층 장비(허브, 리피터)로 여러 컴퓨터에 데이터를 전달하려면?

![](https://velog.velcdn.com/images/nsunny0908/post/25609c44-ee2e-45b8-80de-89818e097bb8/image.png)
허브 사용

![](https://velog.velcdn.com/images/nsunny0908/post/f4cdb6b6-0a75-4998-850f-249403367097/image.png)

- 허브는 한 컴퓨터에서 전송된 데이터를 모든 컴퓨터에게 다 전송한다.  
  이를 `플러딩`이라고 한다.  
  → MAC 주소를 알지 못하기 때문.  
  → 비효율적, 데이터 충돌 위험성⬆️

  - 맥주소: NIC(랜카드)에 부여된 고유 식별 값.

2계층에서 사용하는 장비인 스위치 브릿지 등은 MAC주소를 알기 때문에 4번이 1번pc한테만 전송하는게 가능하다.

이것처럼, 우리는 2계층의 프로토콜과 장비들로 이런 문제를 해결할 수 있다.

## 2계층의 장비들로 여러대의 컴퓨터를 연결하려면?

- 네 대의 컴퓨터가 스위치라는 장비를 통해 연결되어 있다.

![](https://velog.velcdn.com/images/nsunny0908/post/02a59af8-b85a-4294-8126-b394b60949b0/image.png)

- 나머지 세 대의 컴퓨터가 ‘예림'의 컴퓨터로 데이터를 동시에 보냈다고 가정했을때 ‘예림'이의 컴퓨터는 데이터를 0101111110001.. 형식으로 붙어서 받게 된다.

![](https://velog.velcdn.com/images/nsunny0908/post/8a9b8d55-5c02-4087-9cc3-8e1dbba2d7f5/image.png)

- 제대로 잘 끊어서 받지 않으면 엉뚱한 데이터를 받게 된다.
- 제대로 잘 끊어서 데이터를 받기 위해 데이터를 보내는 쪽은 **데이터의 앞, 뒤에 특정한 비트열**을 붙인다.

![](https://velog.velcdn.com/images/nsunny0908/post/74ed3636-a1ae-494f-9d22-5de1f02ce3e4/image.png)

![](https://velog.velcdn.com/images/nsunny0908/post/c0ab96d9-f764-41a0-9099-6f2bd9d59a90/image.png)

→ 이 과정을 `프레이밍`이라고 한다.

## 이더넷

- LAN의 2계층에서 사용되는 프로토콜 (규칙)
- 고유의 주소를 이용해 데이터를 주고받을 수 있도록 한다.
- 주소는 데이터 전송 방법에 따라 3가지 종류가 있다.

### 유니캐스트

- 1:1 통신
- 가장 일반적이다.
- 각각의 기기는 유니캐스트의 주소를 반드시 하나 갖고 있다.
- 유니캐스트의 주소는 유일해야한다.

### 브로드캐스트

- 세그먼트 내의 모든 기기에게 메세지를 보내는 데이터 통신

### 멀티캐스트

- 1:N
- 같은 주소를 가진 기기가 여러개 있을 수 있다.

각각의 기기는 유니캐스트의 주소를 반드시 하나 갖고있다.  
반면에 멀티캐스트는 같은 주소를 가진 기기가 여러개 있어도 되는데, 멀티캐스트 주소는 ‘그룹'과 같은 취급을 하기 때문이다.  
멀티캐스트가 1대 다수에게 메세지를 보내는 주소라고 했으니까, 굳이 각각 기기의 유니캐스트에게 보낼 필요 없이, 여러개의 기기를 아우르는 주소의 그룹에게 보내면 되는 것!

그러니까, 멀티캐스트의 그룹에 속한 기기는 자신의 유니캐스트 주소 1개와 멀티캐스트 주소 이렇게 총 2개의 주소를 갖게 된다.

예를 들자면, A라는 회사 개발팀 소속 kim에게 편지를 보내는 상황이 있다고 가정해보자.  
수신처를 kim이라고 하면 유니캐스트로 수신을 하게 되는거고, A회사의 개발팀 으로 수신처를 정하게 되면 멀티캐스트로 수신하게 되는 것이다.

## MAC주소

- 인터페이스에 지정된 고정 주소

## 이더넷은 어떻게 데이터를 송신할까?

### 신호

- 허브로 연결되어 있는 컴퓨터는 같은 충돌 도메인에 있기 때문에 충돌이 발생한다.
- 이더넷에서는 수신한 수신처의 MAC주소를 보고 해당 MAC주소가 아닌 다른 프레임은 다 파기하게 된다.
- 그렇기 때문에 주소라는건 수신처가 자기인지 아닌지를 체크하기 위해서 있다고 할 수 있다.

그렇다면 멀티캐스트랑 브로드캐스트는 그룹으로 묶인 주소를 가지고 있을텐데 이 경우에는 어떻게 판단하게 될까?

멀티캐스트는 주소에 그룹의 번호가 들어있기 때문에 자신이 그 그룹의 소속되어있다면 수신하고 그 외의 경우는 파기하게 되고, 브로드캐스트는 어차피 전체 수신이때문에 반드시 수신하게 된다.

### 충돌

- 이더넷에서는 신호가 겹쳐서 충돌이 일어나지 않게 하는데 이를 위해서 CSMA/CD 라는 액세스 제어를 시행한다.

### CSMA/CD

- Carrier Sense(CS) : 송신자가 현재 회선에 신호가 흐르는지 탐지해서 누군가 송신중이라면 송신하지 않는다.
- Multiple Access(MA) : 아무도 송신하고 있지 않아 안전할 경우 송신을 허용한다.
- Collision Detection(CD) : 그다음 충돌을 탐지해 충돌이 일어나면 다시 재수행한다.

→ 하지만 타이밍을 겹치지 않게 엇갈리게 해줄 뿐, 충돌을 모두 막아줄 수 없다.

## 스위치

- 허브에 여러가지 기능을 추가
- 신호가 지나는 길을 나누는 방법을 사용해 충돌을 막아주는 기기
  (허브는 충돌이 발생하지 않도록 하기 위해서 신호를 보내는 타이밍을 겹치지 않게 엇갈리게 한다. 그런데 이 방법은 충돌을 모두 막아줄수가 없다. 우연치않게 타이밍이 겹치게 되면 충돌이 일어나기 때문이다.)

### MAC 주소 테이블

- 포트에 연결되어있는 컴퓨터의 MAC주소를 기억하고 데이터베이스로 갖고 있다.

### 스위치가 MAC 주소 테이블을 작성하는 과정

- 통신을 하기 전까지는 MAC 주소 테이블은 비어 있다.

![](https://velog.velcdn.com/images/nsunny0908/post/72150b11-a9e2-4a2d-9462-b6555ab62e9d/image.png)

- 컴퓨터 1이 컴퓨터 3으로 데이터를 전송했을 때 데이터는 스위치를 거치면서 MAC 주소 테이블에 컴퓨터1의 맥주소가 추가된다.

![](https://velog.velcdn.com/images/nsunny0908/post/954a35bd-47f1-4562-b7de-cdfe33bed9e1/image.png)

- 컴퓨터 3으로 데이터를 보내야하는데 목적지의 MAC 주소를 모르기 때문에 플러딩이 발생한다.

![](https://velog.velcdn.com/images/nsunny0908/post/dd0cf92b-7510-4608-a59c-7c5c60a8a0e2/image.png)

- 목적지의 MAC주소를 아는 경우, 목적지에만 데이터를 전송하고 나머지 컴퓨터에는 데이터를 전송하지 않는다.
- 수신처가 다른 프레임이 동시에 스위치에 도착하게 되어도 충돌은 발생하지 않게 된다.

![](https://velog.velcdn.com/images/nsunny0908/post/63772d61-d984-4e91-bde8-ed05de40331b/image.png)

그런데 만약에 수신처가 같은 프레임이 동시에 도달한 경우에는 어떻게 될까?  
여기서 버퍼링이라는 개념이 나오게 된다.

## 버퍼

- 일시적으로 데이터를 기록해 둘 수 있는 메모리
- 충돌할 것 같은 프레임을 버퍼에 일시적으로 저장
- 먼저 보냈던 프레임의 송신이 끝나면 저장해뒀던 프레임을 송신한다. (임시피난소 느낌)
- 용량이 제한되어 있다.
- 특정한 규격을 사용해 버퍼가 부족할 것 같다고 판단되면 백 프레셔 등과 같은 규격을 사용해 송신을 중지한다.

## 버퍼링

- 버퍼(Buffer)를 사용한 처리를 실행하는 것
- 먼저 보냈던 프레임의 송신이 끝나면 저장해뒀던 프레임을 송신하는 것

## 전이중 통신

- 송신과 수신을 동시에 할 수 있는 방식
- ↔ CSMA/CD : 반이중 통신

## 전이중 이더넷

- 스위치는 전이중 통신이기 때문에 충돌을 염려할 필요가 없다. -> CSMA/CD를 사용할 필요가 없다.
- 스위치를 사용해 전이중 통신을 하는 것

## 📝 정리

1. 데이터링크 레이어는 ‘데이터를 어떻게 송수신할건지'를 생각하고 ‘규칙을 정하는’ 역할을 하는 계층이다.
2. 2계층의 이더넷은 고유의 주소를 이용해 데이터를 주고받을 수 있도록 한다.
3. 스위치는 허브와 달리 MAC 주소 테이블을 이용해 수신처에 해당하는 데이터만 전송할 수 있다.
